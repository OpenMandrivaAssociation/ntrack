#
#  Copyright (C) 2009  Alexander Sack <asac@jwsdot.com>
#
#  This file is part of:
#      ntrack - Network Status Tracking for Desktop Applications
#               http://launchpad.net/ntrack
#
#   ntrack is free software: you can redistribute it and/or modify
#   it under the terms of the GNU Lesser General Public License as
#   published by the Free Software Foundation, either version 3 of
#   the License, or (at your option) any later version.
#
#   ntrack is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU Lesser General Public License for more details.
#
#   You should have received a copy of the GNU Lesser General Public
#   License along with ntrack.  If not, see <http://www.gnu.org/licenses/>.
#

SUBDIRS = test
lib_LTLIBRARIES = libntrack-qt4.la
qt4pkgincludedir = $(pkgincludedir)/qt4

NTRACK_QT4_LT_VERSION = 1:1:0

AM_CFLAGS = \
	-Wall \
	-Werror \
	-pedantic \
	-isystem $(shell pkg-config --variable=includedir QtCore)

AM_LDFLAGS =

libntrack_qt4_la_SOURCES = \
	QNtrack.cpp

nodist_libntrack_qt4_la_SOURCES = \
	moc_QNtrack.cpp

libntrack_qt4_la_CXXFLAGS = \
	$(AM_CFLAGS) \
	$(QTCORE_CFLAGS) \
	-I$(top_srcdir)/common

libntrack_qt4_la_LIBADD = \
	$(QTCORE_LIBS) \
	../common/libntrack.la

libntrack_qt4_la_LDFLAGS = \
	$(AM_LDFLAGS) \
	-version-info $(NTRACK_QT4_LT_VERSION)

qt4pkginclude_HEADERS = \
	QNtrack.h

EXTRA_DIST = \
	libntrack-qt4.pc.in \
	$(nodist_libntrack_qt4_la_SOURCES:moc_%.cpp=%.h)

pkgconfigdir = $(libdir)/pkgconfig
pkgconfig_DATA = \
	libntrack-qt4.pc

# This rule lets GNU make create any moc_*.cpp from the equivalent *.h
moc_QNtrack.cpp: QNtrack.h
	$(MOC_QT4_BIN) $? -o $@

CLEANFILES = moc_QNtrack.cpp

